<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>I'm Sorry üíî</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r128/three.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.11.4/gsap.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/canvas-confetti@1.6.0/dist/confetti.browser.min.js"></script>
  <style>
    body {
      margin: 0;
      overflow: hidden;
      font-family: 'Inter', sans-serif;
      height: 100vh;
      touch-action: manipulation;
      /* Soft Pink Apology Gradient */
      background: linear-gradient(135deg, #fbcfe8, #fff1f2, #e5e7eb);
    }

    #app {
      position: relative;
      width: 100%;
      height: 100%;
      overflow: hidden;
    }

    #content {
      position: relative;
      z-index: 10;
      width: 100%;
      height: 100%;
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      padding: 20px;
      box-sizing: border-box;
    }

    .step {
      position: absolute;
      width: 100%;
      max-width: 600px; /* Slightly narrower for intimacy */
      padding: 40px;
      background: rgba(255, 255, 255, 0.65);
      backdrop-filter: blur(12px);
      border-radius: 20px;
      border: 1px solid rgba(255, 255, 255, 0.8);
      box-shadow: 0 10px 30px rgba(244, 63, 94, 0.15); /* Pink shadow */
      text-align: center;
      opacity: 0;
      transform: translateY(20px);
      transition: all 0.8s cubic-bezier(0.16, 1, 0.3, 1);
      pointer-events: none;

      /* Mobile Scroll Fixes */
      max-height: 85vh;
      overflow-y: auto;
      scrollbar-width: none;
    }

    .step::-webkit-scrollbar {
      display: none;
    }

    .step.active {
      opacity: 1;
      transform: translateY(0);
      pointer-events: all;
    }

    .btn {
      background: linear-gradient(135deg, #f43f5e, #e11d48); /* Deep Pink/Red */
      color: white;
      border: none;
      padding: 14px 32px;
      border-radius: 50px;
      font-weight: 600;
      cursor: pointer;
      margin-top: 20px;
      box-shadow: 0 4px 15px rgba(225, 29, 72, 0.3);
      transition: all 0.3s ease;
      margin-bottom: 10px;
      font-size: 1.1rem;
    }

    .btn:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(225, 29, 72, 0.4);
    }

    .btn-secondary {
      background: white;
      color: #e11d48;
      border: 2px solid #e11d48;
    }

    .text-gradient {
      background: linear-gradient(135deg, #be123c, #fb7185);
      -webkit-background-clip: text;
      background-clip: text;
      color: transparent;
    }

    .emoji {
      font-size: 3.5rem;
      margin-bottom: 15px;
      display: inline-block;
      filter: drop-shadow(0 4px 6px rgba(0,0,0,0.1));
    }

    .sad-beat {
      animation: heartbeat 2s ease-in-out infinite;
    }

    @keyframes heartbeat {
      0% { transform: scale(1); }
      50% { transform: scale(0.95); }
      100% { transform: scale(1); }
    }

    #canvas-container {
      position: fixed;
      top: 0;
      left: 0;
      width: 100%;
      height: 100%;
      z-index: 1;
    }

    /* Mobile Text Sizes */
    @media (max-width: 768px) {
      .step { padding: 30px 20px; }
      h1 { font-size: 2rem !important; }
      h2 { font-size: 1.8rem !important; }
      p { font-size: 1rem !important; }
    }
  </style>
</head>

<body>
  <div id="app">
    <div id="canvas-container"></div>

    <div id="content">
      
      <div class="step active" id="step1">
        <img src="https://media.giphy.com/media/v1.Y2lkPTc5MGI3NjExM3R6cWwxZXZ3YXExbmhlaHl6cWwxZXZ3YXExbmhlaHl6cWwxZXZ3YSZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9cw/L95W4wv8nnb9K/giphy.gif" 
             class="emoji sad-beat" 
             style="width:120px; height:120px; object-fit:contain; border-radius:10px;" 
             alt="sad bear">
        
        <h1 class="text-4xl md:text-5xl font-bold mb-6 text-gradient">Soundu...</h1>
        <p class="text-xl text-gray-600 mb-8">
          I think I messed up, didn't I?<br>
          My heart feels really heavy right now.
        </p>
        <button class="btn" id="start-btn">Can I explain? üòî</button>
      </div>

      <div class="step" id="step2">
        <div class="emoji">üíî</div>
        <h2 class="text-3xl md:text-4xl font-bold mb-6 text-gradient">I am really sorry</h2>
        <p class="text-lg text-gray-700 mb-6 leading-relaxed">
          I never meant to hurt you or make you upset. I never want to be the cause of it.
          <br><br>
          I'm really sorry, and I promise to be better.
        </p>
        <button class="btn" id="next-btn-2">Why you matter...</button>
      </div>

      <div class="step" id="step3">
        <div class="emoji">ü•∫</div>
        <h2 class="text-3xl md:text-4xl font-bold mb-6 text-gradient">Without You...</h2>
        <p class="text-lg text-gray-700 mb-8">
          Fighting with you feels like the sun has stopped shining. 
          Everything feels dull and quiet.
          <br><br>
          <b>I love our conversations, and I want us to get back to that place where everything between us feels light and free again.</b>, and I hate that I'm the reason it's missing right now.
        </p>
        <button class="btn" id="next-btn-3">Can we fix this?</button>
      </div>

      <div class="step" id="step4">
        <div class="emoji">üè≥Ô∏è</div>
        <h2 class="text-3xl md:text-4xl font-bold mb-6 text-gradient">Peace Treaty?</h2>
        <p class="text-lg text-gray-700 mb-8">
          Will you forgive me?‚ù§Ô∏è<br>
          I‚Äôll make it up to you‚ÄîI just want us to feel good and close again.
        </p>
        
        <div class="flex flex-col gap-4 items-center justify-center w-full">
          <button class="btn w-full md:w-auto" id="yes-btn">Yes, I forgive you ‚ú®</button>
          
          <button class="btn btn-secondary w-full md:w-auto" id="no-btn" style="position: relative;">No, stay away üò§</button>
        </div>
      </div>

      <div class="step" id="step5" style="text-align: center;">
    <img src="us.jpg" 
     alt="happy us"
     style="width:200px; height:200px; object-fit:cover; 
            border-radius:50%; margin-bottom:20px;
            box-shadow: 0 5px 15px rgba(0,0,0,0.1);
            transform: scale(0.8);
            transform-origin: center;
            display:block; margin-left:auto; margin-right:auto;">


    
    <h2 class="text-3xl md:text-4xl font-bold mb-6 text-gradient">Thank You! ‚ú®</h2>

    <p class="text-lg text-gray-700 mb-8">
      You are the best! I really like you so much, Soundu.<br>
      No more sad faces‚Äîonly smiles from here on.
    </p>

    <p class="text-sm text-pink-400">Sending some warmth your way‚Ä¶...</p>

    <button class="btn" id="confetti-btn">
        A big wave of comfort for you ‚ú®üòä
    </button>
</div>


    </div>
  </div>

  <script>
    // --- 1. Three.js Background (Soft Floating Hearts/Bubbles) ---
    const container = document.getElementById('canvas-container');
    const renderer = new THREE.WebGLRenderer({ antialias: true, alpha: true });
    renderer.setSize(window.innerWidth, window.innerHeight);
    container.appendChild(renderer.domElement);

    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(75, window.innerWidth / window.innerHeight, 0.1, 1000);
    camera.position.z = 30;

    // Soft Lights
    const ambientLight = new THREE.AmbientLight(0xffffff, 0.8);
    scene.add(ambientLight);
    const directionalLight = new THREE.DirectionalLight(0xffffff, 0.5);
    directionalLight.position.set(1, 1, 1);
    scene.add(directionalLight);

    // Create shapes
    function createFloater(color) {
      // Using Icosahedron for a "gem" or abstract heart look
      const geometry = new THREE.IcosahedronGeometry(1.5, 0); 
      const material = new THREE.MeshPhongMaterial({
        color: color,
        shininess: 100,
        flatShading: true, // Gives it a crystal look
        transparent: true,
        opacity: 0.8
      });
      const mesh = new THREE.Mesh(geometry, material);
      return mesh;
    }

    const floaters = [];
    // Colors: Deep Red, Pink, Soft White, Salmon
    const colors = [0xe11d48, 0xf43f5e, 0xfecdd3, 0xfff1f2];

    for (let i = 0; i < 30; i++) {
      const color = colors[Math.floor(Math.random() * colors.length)];
      const mesh = createFloater(color);

      // Random position spread
      mesh.position.x = (Math.random() - 0.5) * 60;
      mesh.position.y = (Math.random() - 0.5) * 60;
      mesh.position.z = (Math.random() - 0.5) * 40;

      // Random scale
      const s = Math.random() * 0.8 + 0.4;
      mesh.scale.set(s, s, s);

      // Animation data
      mesh.userData = {
        speedY: 0.02 + Math.random() * 0.03, // Float up speed
        rotX: Math.random() * 0.01,
        rotY: Math.random() * 0.01
      };

      scene.add(mesh);
      floaters.push(mesh);
    }

    function animate() {
      requestAnimationFrame(animate);

      floaters.forEach(mesh => {
        mesh.position.y += mesh.userData.speedY;
        mesh.rotation.x += mesh.userData.rotX;
        mesh.rotation.y += mesh.userData.rotY;

        // Reset if it goes too high
        if (mesh.position.y > 40) {
          mesh.position.y = -40;
          mesh.position.x = (Math.random() - 0.5) * 60;
        }
      });

      renderer.render(scene, camera);
    }
    animate();

    // Handle Resize
    window.addEventListener('resize', () => {
      camera.aspect = window.innerWidth / window.innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(window.innerWidth, window.innerHeight);
    });


    // --- 2. Navigation Logic ---
    function showStep(id) {
      document.querySelectorAll('.step').forEach(s => s.classList.remove('active'));
      const el = document.getElementById(id);
      el.classList.add('active');
      el.scrollTop = 0; // Fix scroll position
    }

    document.getElementById('start-btn').addEventListener('click', () => showStep('step2'));
    document.getElementById('next-btn-2').addEventListener('click', () => showStep('step3'));
    document.getElementById('next-btn-3').addEventListener('click', () => showStep('step4'));
    
    // The "Yes" button
    document.getElementById('yes-btn').addEventListener('click', () => {
      showStep('step5');
      // Trigger instant confetti
      confetti({
        particleCount: 150,
        spread: 70,
        origin: { y: 0.6 },
        colors: ['#e11d48', '#f43f5e', '#ffffff'] // Red/Pink/White confetti
      });
    });

    // --- 3. The "Runaway" No Button Logic ---
    const noBtn = document.getElementById('no-btn');
    
    // Function to move button
    function moveButton() {
      const x = (Math.random() - 0.5) * 200; // Move left/right
      const y = (Math.random() - 0.5) * 200; // Move up/down
      noBtn.style.transform = `translate(${x}px, ${y}px)`;
    }

    // Move on hover (desktop)
    noBtn.addEventListener('mouseover', moveButton);
    // Move on click/tap (mobile)
    noBtn.addEventListener('click', (e) => {
      e.preventDefault(); // Don't actually click
      moveButton();
    });

    // --- 4. Final Celebration ---
    document.getElementById('confetti-btn').addEventListener('click', () => {
      const duration = 3000;
      const end = Date.now() + duration;

      (function frame() {
        confetti({
          particleCount: 5,
          angle: 60,
          spread: 55,
          origin: { x: 0 },
          colors: ['#e11d48', '#ffffff']
        });
        confetti({
          particleCount: 5,
          angle: 120,
          spread: 55,
          origin: { x: 1 },
          colors: ['#e11d48', '#ffffff']
        });

        if (Date.now() < end) {
          requestAnimationFrame(frame);
        }
      }());
    });

  </script>
</body>
</html>
